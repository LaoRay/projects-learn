webpackJsonp([3],{2:function(t,e){"use strict";function n(t,e,n){function o(t,n){return sessionStorage.setItem("Authorization",t),$http.defaults.headers.Authorization=t,e&&e(n)}return sessionStorage.getItem("Authorization")?o(sessionStorage.getItem("Authorization")):void $http.post(v+"/v1/open/getSessionId",{code:t}).then(function(t){return o(t.data&&t.data.sessionId,t)}).catch(function(t){return _("当前会话已过期"),n&&n(t)})}function o(t){$http.defaults.headers.Authorization=t}function i(t){return sessionStorage.getItem("Authorization")&&o(sessionStorage.getItem("Authorization")),$http.get(v+"/user/info",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function r(t){return sessionStorage.getItem("Authorization")&&o(sessionStorage.getItem("Authorization")),$http.post(v+"/annualTicket/order/add",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function s(t){return sessionStorage.getItem("Authorization")&&o(sessionStorage.getItem("Authorization")),$http.get(v+"/annualTicket/order/details/"+t+"?"+Math.random()).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function a(t){return sessionStorage.getItem("Authorization")&&o(sessionStorage.getItem("Authorization")),$http.post(v+"/v1/open/pay",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function u(t){return sessionStorage.getItem("Authorization")&&o(sessionStorage.getItem("Authorization")),$http.post(v+"/annualTicket/order/cancel",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function c(t){return sessionStorage.getItem("Authorization")&&o(sessionStorage.getItem("Authorization")),$http.post(v+"/annualTicket/order/delete",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function l(t){return sessionStorage.getItem("Authorization")&&o(sessionStorage.getItem("Authorization")),$http.get(v+"/annualTicket/order/list/"+t+"?"+Math.random()).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function h(t){return sessionStorage.getItem("Authorization")&&o(sessionStorage.getItem("Authorization")),$http.post(v+"/v1/open/queryOrder",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function d(t){return sessionStorage.getItem("Authorization")&&o(sessionStorage.getItem("Authorization")),$http.post(v+"/manager/order/entranceTicket/list",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function f(t){return sessionStorage.getItem("Authorization")&&o(sessionStorage.getItem("Authorization")),$http.get(v+"/manager/order/entranceTicket/details/"+t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function g(t){return sessionStorage.getItem("Authorization")&&o(sessionStorage.getItem("Authorization")),$http.post(v+"/manager/order/annualTicket/list",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function p(t){return sessionStorage.getItem("Authorization")&&o(sessionStorage.getItem("Authorization")),$http.get(v+"/manager/order/annualTicket/details/"+t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function m(t){return sessionStorage.getItem("Authorization")&&o(sessionStorage.getItem("Authorization")),$http.post(v+"/wx/pay",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}Object.defineProperty(e,"__esModule",{value:!0}),e.getSessionId=n,e.info=i,e.annualTicket=r,e.annualTicketDetail=s,e.annualTicketPay=a,e.annualTicketCancel=u,e.annualTicketDelete=c,e.annualTicketList=l,e.annualTicketStatus=h,e.orderList=d,e.orderDetail=f,e.annualList=g,e.annualDetail=p,e.getLocalIp=m;var v=window.CONFIG.DEV?window.CONFIG.API_DEV:window.CONFIG.API_HOST,_=function(t){alert(t)};$http.defaults.headers.Authorization=sessionStorage.getItem("Authorization");var I={SUCCESS:"0",TIMEOUT:"500",TOKEN_INVALID:"5001",CODE_INVALID:"5002"};$http.interceptors.response.use(function(t){var e=t.meta&&t.meta.code+"";switch(e){case I.SUCCESS:return t;case I.TOKEN_INVALID:case I.CODE_INVALID:return sessionStorage.removeItem("Authorization"),$http.defaults.headers.Authorization=void 0,_(t.meta.message||"当前会话已过期"),setTimeout(function(){window.location.href="toon://mwap/window?params="+JSON.stringify({functionType:1})},2e3),Promise.reject(t);default:return Promise.reject(t)}},function(t){return Promise.reject(t)})},66:function(t,e,n){n(99);var o=n(3)(n(77),n(119),"data-v-4190581c",null);t.exports=o.exports},77:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(84),r=o(i);e.default=r.default},84:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),i=n(4);e.default={data:function(){return{headLlist:["全部","待支付","已支付","已失效"],currentIndex:0,deleteShow:!1,orderList:[],itemList:{},deleteIndex:0,epOrderNoFir:""}},mounted:function(){$util.setTitle("充值订单"),this.annualTicketListFun()},methods:{headLlists:function(t){console.log(t),this.currentIndex=t,this.annualTicketListFun()},deletePage:function(t,e){this.deleteShow=!0,this.itemList=t,this.deleteIndex=e},goPay:function(t){$util.sessionData("dataPay",t),this.$router.push({name:"collectMoney"})},goOderDetail:function(t){if(navigator.onLine){t.orderNo;this.$router.push({name:"orderDetail"}),$util.sessionData("orderNoDtail",t.orderNo)}else $util.Toast("请检查网络设置并稍后重试")},cancel:function(){this.deleteShow=!1},soure:function(t){var e=this;this.deleteShow=!1;var n={epOrderNo:this.itemList.epOrderNo};(0,o.annualTicketDelete)(n).then(function(t){"0"==t.meta.code&&(e.annualTicketListFun(),e.orderList.splice(index,1))}).catch(function(t){})},annualTicketListFun:function(){var t=this,e=this.currentIndex;(0,o.annualTicketList)(e).then(function(e){for(var n=0;n<e.data.length;n++)e.data[n].addTime=(0,i.setTime)(e.data[n].addTime);t.orderList=e.data}).catch(function(t){console.log(t)})}}}},99:function(t,e){},112:function(t,e,n){t.exports=n.p+"static/images/noData@2x.6b3d2be.png"},119:function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"purchase"},[n("div",{staticClass:"choseList hairline-bottom"},[n("ul",t._l(t.headLlist,function(e,o){return n("li",{on:{click:function(e){t.headLlists(o)}}},[n("span",{class:t.currentIndex==o?"chose":""},[t._v(t._s(e))])])}))]),t._v(" "),n("div",{staticClass:"purchaseContent"},[n("ul",t._l(t.orderList,function(e,o){return n("li",{on:{click:function(n){t.goOderDetail(e)}}},[n("div",{staticClass:"first hairline-bottom"},[n("div",{staticClass:"infoTitle"},[t._v("\n\t\t\t\t\t避暑山庄景区-普通年票\n\t\t\t\t")]),t._v(" "),n("p",[n("span",{staticStyle:{"margin-right":"24px"}},[t._v("订单号:")]),n("span",[t._v(t._s(e.epOrderNo))])]),t._v(" "),n("p",[n("span",[t._v("下单时间:")]),n("span",[t._v(t._s(e.addTime))])]),t._v(" "),n("p",[n("span",[t._v("订单金额:")]),n("span",[t._v(t._s(e.amount)+".00元")])])]),t._v(" "),2==e.flag?n("div",{staticClass:"payStatus1"},[n("span",[t._v("已支付")]),t._v(" "),n("span",{on:{click:function(n){n.stopPropagation(),t.deletePage(e)}}},[t._v("删除订单")])]):t._e(),t._v(" "),1==e.flag?n("div",{staticClass:"payStatus2"},[n("span",[t._v("待支付")]),t._v(" "),n("span",{on:{click:function(n){n.stopPropagation(),t.goPay(e)}}},[t._v("去支付")])]):t._e(),t._v(" "),3==e.flag?n("div",{staticClass:"payStatus3"},[n("span",[t._v("已失效")]),t._v(" "),n("span",{on:{click:function(n){n.stopPropagation(),t.deletePage(e,o)}}},[t._v("删除订单")])]):t._e(),t._v(" "),4==e.flag?n("div",{staticClass:"payStatus3"},[n("span",[t._v("已取消")]),t._v(" "),n("span",{on:{click:function(n){n.stopPropagation(),t.deletePage(e,o)}}},[t._v("删除订单")])]):t._e(),t._v(" "),9==e.flag?n("div",{staticClass:"payStatus3"},[n("span",[t._v("订单异常")])]):t._e()])})),t._v(" "),t.deleteShow?n("div",{staticClass:"prop"},[n("div",{staticClass:"propText"},[n("div",[t._v("确认要删除订单？")]),t._v(" "),n("p",[t._v("删除后在充值订单中将不再显示")]),t._v(" "),n("div",{staticClass:"hairline-top",staticStyle:{width:"100%",height:"50px",position:"absolute",bottom:"0"}},[n("span",{staticClass:"hairline-right",on:{click:t.cancel}},[t._v("取消")]),t._v(" "),n("span",{on:{click:t.soure}},[t._v("确定")])])])]):t._e(),t._v(" "),t.orderList&&0==t.orderList.length?n("div",{staticClass:"noData"},[t._m(0),t._v(" "),n("p",[t._v("暂无订单信息")])]):t._e()])])},staticRenderFns:[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("img",{attrs:{src:n(112)}})])}]}}});