webpackJsonp([6],{2:function(t,e){"use strict";function n(t,e,n){function r(t,n){return sessionStorage.setItem("Authorization",t),$http.defaults.headers.Authorization=t,e&&e(n)}return sessionStorage.getItem("Authorization")?r(sessionStorage.getItem("Authorization")):void $http.post(v+"/v1/open/getSessionId",{code:t}).then(function(t){return r(t.data&&t.data.sessionId,t)}).catch(function(t){return S("当前会话已过期"),n&&n(t)})}function r(t){$http.defaults.headers.Authorization=t}function i(t){return sessionStorage.getItem("Authorization")&&r(sessionStorage.getItem("Authorization")),$http.get(v+"/user/info",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function o(t){return sessionStorage.getItem("Authorization")&&r(sessionStorage.getItem("Authorization")),$http.post(v+"/annualTicket/order/add",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function a(t){return sessionStorage.getItem("Authorization")&&r(sessionStorage.getItem("Authorization")),$http.get(v+"/annualTicket/order/details/"+t+"?"+Math.random()).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function s(t){return sessionStorage.getItem("Authorization")&&r(sessionStorage.getItem("Authorization")),$http.post(v+"/v1/open/pay",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function u(t){return sessionStorage.getItem("Authorization")&&r(sessionStorage.getItem("Authorization")),$http.post(v+"/annualTicket/order/cancel",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function c(t){return sessionStorage.getItem("Authorization")&&r(sessionStorage.getItem("Authorization")),$http.post(v+"/annualTicket/order/delete",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function l(t){return sessionStorage.getItem("Authorization")&&r(sessionStorage.getItem("Authorization")),$http.get(v+"/annualTicket/order/list/"+t+"?"+Math.random()).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function d(t){return sessionStorage.getItem("Authorization")&&r(sessionStorage.getItem("Authorization")),$http.post(v+"/v1/open/queryOrder",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function h(t){return sessionStorage.getItem("Authorization")&&r(sessionStorage.getItem("Authorization")),$http.post(v+"/manager/order/entranceTicket/list",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function m(t){return sessionStorage.getItem("Authorization")&&r(sessionStorage.getItem("Authorization")),$http.get(v+"/manager/order/entranceTicket/details/"+t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function g(t){return sessionStorage.getItem("Authorization")&&r(sessionStorage.getItem("Authorization")),$http.post(v+"/manager/order/annualTicket/list",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function f(t){return sessionStorage.getItem("Authorization")&&r(sessionStorage.getItem("Authorization")),$http.get(v+"/manager/order/annualTicket/details/"+t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function p(t){return sessionStorage.getItem("Authorization")&&r(sessionStorage.getItem("Authorization")),$http.post(v+"/wx/pay",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}Object.defineProperty(e,"__esModule",{value:!0}),e.getSessionId=n,e.info=i,e.annualTicket=o,e.annualTicketDetail=a,e.annualTicketPay=s,e.annualTicketCancel=u,e.annualTicketDelete=c,e.annualTicketList=l,e.annualTicketStatus=d,e.orderList=h,e.orderDetail=m,e.annualList=g,e.annualDetail=f,e.getLocalIp=p;var v=window.CONFIG.DEV?window.CONFIG.API_DEV:window.CONFIG.API_HOST,S=function(t){alert(t)};$http.defaults.headers.Authorization=sessionStorage.getItem("Authorization");var y={SUCCESS:"0",TIMEOUT:"500",TOKEN_INVALID:"5001",CODE_INVALID:"5002"};$http.interceptors.response.use(function(t){var e=t.meta&&t.meta.code+"";switch(e){case y.SUCCESS:return t;case y.TOKEN_INVALID:case y.CODE_INVALID:return sessionStorage.removeItem("Authorization"),$http.defaults.headers.Authorization=void 0,S(t.meta.message||"当前会话已过期"),setTimeout(function(){window.location.href="toon://mwap/window?params="+JSON.stringify({functionType:1})},2e3),Promise.reject(t);default:return Promise.reject(t)}},function(t){return Promise.reject(t)})},70:function(t,e,n){n(97);var r=n(3)(n(82),n(117),"data-v-273b7b45",null);t.exports=r.exports},82:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(90),o=r(i);e.default=o.default},90:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=n(4);e.default={data:function(){var t=this;return{orderList:[],columns:[{type:"index",title:"序号",width:100},{title:"订单号",key:"epOrderNo",width:180,tooltip:"true",render:function(t,e){return t("div",[t("span",{style:{fontFamily:"PingFangSC-Regular",fontSize:"14px",color:" #777E8C",lineHeight:"14px"}},e.row.epOrderNo)])}},{title:"下单时间",key:"addTime",width:200,render:function(t,e){return t("div",[t("span",{style:{fontFamily:"PingFangSC-Regular",fontSize:"14px",color:" #777E8C",lineHeight:"14px"}},e.row.addTime)])}},{title:"账户",key:"mobile",render:function(t,e){return t("div",[t("span",{style:{fontFamily:"PingFangSC-Regular",fontSize:"14px",color:" #777E8C",lineHeight:"14px"}},e.row.mobile)])}},{title:"票名",key:"ticketName",render:function(t,e){return t("div",[t("span",{style:{fontFamily:"PingFangSC-Regular",fontSize:"14px",color:" #777E8C",lineHeight:"14px"}},e.row.ticketName)])},tooltip:!0},{title:"订单金额",key:"amount",render:function(t,e){return t("div",[t("span",{style:{fontFamily:"PingFangSC-Regular",fontSize:"14px",color:" #777E8C",lineHeight:"14px"}},e.row.amount)])}},{title:"订单状态",key:"flag",width:120,render:function(t,e){return t("div",[t("span",{style:{fontFamily:"PingFangSC-Regular",fontSize:"14px",color:" #777E8C",lineHeight:"14px"}},e.row.flag)])}},{title:"操作",key:"order",render:function(e,n){return e("div",[e("span",{style:{fontFamily:"PingFangSC-Regular",fontSize:"14px",color:"#3F94FC",lineHeight:"14px"},on:{click:function(){t.$router.push({name:"orderDetail",query:{epOrderNo:n.row.epOrderNo}})}}},"查看详情")])}}],filters:{epOrderNo:"",mobile:"",flag:0,addTimeStart:"",addTimeEnd:""},pages:{current:1,size:10},total:0,startTime:"",endTime:"",pickerDisabled:!0}},methods:{getOrderList:function(){var t=this,e={epOrderNo:this.filters.epOrderNo,mobile:this.filters.mobile,flag:this.filters.flag,addTimeStart:this.filters.addTimeStart,addTimeEnd:this.filters.addTimeEnd,current:this.pages.current,size:this.pages.size};(0,r.orderList)(e).then(function(e){if(0===e.meta.code){var n=e.data,r=t.flagMap();t.total=n.total,t.orderList=n.records,n.records.forEach(function(t){null!==t.addTime&&(t.addTime=(0,i.dateFormat)("yyyy-MM-dd hh:mm:ss",t.addTime)),null!==t.payTime&&(t.payTime=(0,i.dateFormat)("yyyy-MM-dd hh:mm:ss",t.payTime)),r.forEach(function(e){Object.keys(e).forEach(function(n){t.flag===parseInt(n)&&(t.flag=e[n])})})})}}).catch(function(t){})},handleQuery:function(){this.getOrderList()},handelPages:function(t){this.pages.current=t,this.getOrderList()},handlePageSizeChange:function(t){this.pages.size=t,this.getOrderList()},flagMap:function(){return[{1:"未支付",2:"已支付",3:"已失效",4:"已取消",9:"异常订单"}]},changeStart:function(t){var e=this;this.startTime=t,this.filters.addTimeStart=new Date(t).getTime(),this.endTime&&this.startTime&&this.endTime<this.startTime&&this.$Modal.warning({content:"起始时间不能大于结束时间",onOk:function(){e.startTime=""}})},changeEnd:function(t){var e=this;this.endTime=t,this.filters.addTimeEnd=new Date(t).getTime(),this.endTime&&this.endTime<this.startTime&&this.$Modal.warning({content:"结束时间不能小于开始时间",onOk:function(){e.endTime=""}})}},mounted:function(){this.getOrderList()}}},97:function(t,e){},117:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"content"},[n("div",{staticClass:"content-wrapper"},[n("div",{staticClass:"input-group"},[n("Form",{attrs:{"label-width":70}},[n("Row",[n("Col",{attrs:{span:"6"}},[n("FormItem",{attrs:{label:"订单号"}},[n("Input",{staticStyle:{width:"240px"},attrs:{size:"large"},model:{value:t.filters.epOrderNo,callback:function(e){t.$set(t.filters,"epOrderNo",e)},expression:"filters.epOrderNo"}})],1)],1),t._v(" "),n("Col",{attrs:{span:"6",offset:"6"}},[n("FormItem",{attrs:{label:"账户"}},[n("Input",{staticStyle:{width:"240px"},attrs:{size:"large"},model:{value:t.filters.mobile,callback:function(e){t.$set(t.filters,"mobile",e)},expression:"filters.mobile"}})],1)],1)],1),t._v(" "),n("Row",[n("Col",{attrs:{span:"12"}},[n("FormItem",{attrs:{label:"创建时间"}},[n("DatePicker",{staticStyle:{width:"240px"},attrs:{size:"large",placeholder:"提交开始日期时间",format:"yyyy/MM/dd HH:mm:ss",type:"datetime",value:t.startTimes},on:{"on-change":t.changeStart}}),t._v(" "),n("DatePicker",{staticStyle:{width:"240px"},attrs:{size:"large",type:"datetime",format:"yyyy/MM/dd HH:mm:ss",placeholder:"提交结束日期时间",value:t.endTime},on:{"on-change":t.changeEnd}})],1)],1),t._v(" "),n("Col",{attrs:{span:"6"}},[n("FormItem",{attrs:{label:"订单状态"}},[n("Select",{staticStyle:{width:"240px"},attrs:{size:"large",placeholder:"全部"},model:{value:t.filters.flag,callback:function(e){t.$set(t.filters,"flag",e)},expression:"filters.flag"}},[n("Option",{attrs:{value:""}},[t._v("全部")]),t._v(" "),n("Option",{attrs:{value:"1"}},[t._v("未支付")]),t._v(" "),n("Option",{attrs:{value:"2"}},[t._v("已支付")]),t._v(" "),n("Option",{attrs:{value:"3"}},[t._v("已失效")]),t._v(" "),n("Option",{attrs:{value:"4"}},[t._v("已取消")]),t._v(" "),n("Option",{attrs:{value:"9"}},[t._v("异常订单")])],1)],1)],1),t._v(" "),n("Col",{attrs:{span:"4"}},[n("FormItem",[n("Button",{staticStyle:{width:"90px"},attrs:{size:"large",type:"primary"},on:{click:t.handleQuery}},[t._v("查询")])],1)],1)],1)],1)],1),t._v(" "),n("div",{staticClass:"table-wrapper"},[t.orderList.length>0?n("div",[n("Table",{staticStyle:{width:"100%"},attrs:{columns:t.columns,data:t.orderList}}),t._v(" "),n("div",{staticClass:"page"},[n("Page",{attrs:{total:t.total,"prev-text":"Previous","next-text":"Next","page-size":"20",current:t.current,"show-elevator":"","show-total":""},on:{"on-change":t.handelPages,"on-page-size-change":t.handlePageSizeChange}})],1)],1):t._e(),t._v(" "),t.orderList.length<=0?n("div",{staticClass:"noData"}):t._e()])])])])},staticRenderFns:[]}}});