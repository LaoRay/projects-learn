webpackJsonp([9],{2:function(t,e){"use strict";function n(t,e,n){function o(t,n){return sessionStorage.setItem("Authorization",t),$http.defaults.headers.Authorization=t,e&&e(n)}return sessionStorage.getItem("Authorization")?o(sessionStorage.getItem("Authorization")):void $http.post(g+"/v1/open/getSessionId",{code:t}).then(function(t){return o(t.data&&t.data.sessionId,t)}).catch(function(t){return S("当前会话已过期"),n&&n(t)})}function o(t){$http.defaults.headers.Authorization=t}function i(t){return sessionStorage.getItem("Authorization")&&o(sessionStorage.getItem("Authorization")),$http.get(g+"/user/info",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function r(t){return sessionStorage.getItem("Authorization")&&o(sessionStorage.getItem("Authorization")),$http.post(g+"/annualTicket/order/add",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function s(t){return sessionStorage.getItem("Authorization")&&o(sessionStorage.getItem("Authorization")),$http.get(g+"/annualTicket/order/details/"+t+"?"+Math.random()).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function a(t){return sessionStorage.getItem("Authorization")&&o(sessionStorage.getItem("Authorization")),$http.post(g+"/v1/open/pay",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function u(t){return sessionStorage.getItem("Authorization")&&o(sessionStorage.getItem("Authorization")),$http.post(g+"/annualTicket/order/cancel",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function c(t){return sessionStorage.getItem("Authorization")&&o(sessionStorage.getItem("Authorization")),$http.post(g+"/annualTicket/order/delete",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function h(t){return sessionStorage.getItem("Authorization")&&o(sessionStorage.getItem("Authorization")),$http.get(g+"/annualTicket/order/list/"+t+"?"+Math.random()).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function l(t){return sessionStorage.getItem("Authorization")&&o(sessionStorage.getItem("Authorization")),$http.post(g+"/v1/open/queryOrder",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function m(t){return sessionStorage.getItem("Authorization")&&o(sessionStorage.getItem("Authorization")),$http.post(g+"/manager/order/entranceTicket/list",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function d(t){return sessionStorage.getItem("Authorization")&&o(sessionStorage.getItem("Authorization")),$http.get(g+"/manager/order/entranceTicket/details/"+t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function f(t){return sessionStorage.getItem("Authorization")&&o(sessionStorage.getItem("Authorization")),$http.post(g+"/manager/order/annualTicket/list",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function v(t){return sessionStorage.getItem("Authorization")&&o(sessionStorage.getItem("Authorization")),$http.get(g+"/manager/order/annualTicket/details/"+t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function p(t){return sessionStorage.getItem("Authorization")&&o(sessionStorage.getItem("Authorization")),$http.post(g+"/wx/pay",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}Object.defineProperty(e,"__esModule",{value:!0}),e.getSessionId=n,e.info=i,e.annualTicket=r,e.annualTicketDetail=s,e.annualTicketPay=a,e.annualTicketCancel=u,e.annualTicketDelete=c,e.annualTicketList=h,e.annualTicketStatus=l,e.orderList=m,e.orderDetail=d,e.annualList=f,e.annualDetail=v,e.getLocalIp=p;var g=window.CONFIG.DEV?window.CONFIG.API_DEV:window.CONFIG.API_HOST,S=function(t){alert(t)};$http.defaults.headers.Authorization=sessionStorage.getItem("Authorization");var _={SUCCESS:"0",TIMEOUT:"500",TOKEN_INVALID:"5001",CODE_INVALID:"5002"};$http.interceptors.response.use(function(t){var e=t.meta&&t.meta.code+"";switch(e){case _.SUCCESS:return t;case _.TOKEN_INVALID:case _.CODE_INVALID:return sessionStorage.removeItem("Authorization"),$http.defaults.headers.Authorization=void 0,S(t.meta.message||"当前会话已过期"),setTimeout(function(){window.location.href="toon://mwap/window?params="+JSON.stringify({functionType:1})},2e3),Promise.reject(t);default:return Promise.reject(t)}},function(t){return Promise.reject(t)})},62:function(t,e,n){n(101);var o=n(3)(n(73),n(122),"data-v-7edc1c58",null);t.exports=o.exports},73:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),i=n(4);e.default={data:function(){return{clearShow:!1,infoObj:{},epOrderNo:"",goPayShow:!0,timer:null,addTime:"",hours:"",minutes:"",seconds:"",shixiaoShow:!1,caleShow:!1,orderTime:"",payFlag:0,epOrderNoFir:""}},mounted:function(){$util.setTitle("确认订单"),this.infoObj=$util.sessionData("data"),this.epOrderNo=this.infoObj.epOrderNo,this.addTime=this.infoObj.addTime,this.orderTime=(0,i.setTime)(this.infoObj.addTime),this.timeCount(),"false"==$util.sessionData("goPayShow")?(this.goPayShow=!1,this.caleShow=!0,this.shixiaoShow=!0):(this.goPayShow=!0,this.caleShow=!1,this.shixiaoShow=!1)},beforeDestroy:function(){clearInterval(this.timer),this.timer=null,$util.sessionData("goPayShow","")},methods:{goPay:function(){navigator.onLine?this.$router.push({name:"collectMoney",query:{a:1}}):$util.Toast("请检查网络设置并稍后重试")},deleteOder:function(){var t=this,e={epOrderNo:this.epOrderNo};(0,o.annualTicketDelete)(e).then(function(e){"0"==e.meta.code&&t.$router.push("index")}).catch(function(t){})},clear:function(){this.clearShow=!0},sure:function(){var t=this,e={epOrderNo:this.epOrderNo||""};this.clearShow=!1,(0,o.annualTicketCancel)(e).then(function(e){"0"==e.meta.code&&($util.Toast("订单已取消"),$util.sessionData("goPayShow","false"),t.goPayShow=!1,t.caleShow=!0,t.shixiaoShow=!0,clearInterval(t.timer))}).catch(function(t){})},cancel:function(){this.clearShow=!1},timeCount:function(){var t=this,e=function(){var e=t.addTime,n=864e5,o=Number(e)+Number(n),i=o-(new Date).getTime();if(i>0){var r=parseInt(i/36e5%24);t.hours=r;var s=i%36e5,a=parseInt(s/6e4);t.minutes=a;var u=s%6e4,c=parseInt(u/1e3);t.seconds=c,i<1e3&&(clearInterval(t.timer),t.timer=null)}else clearInterval(t.timer),t.shixiaoShow=!0};e(),this.timer=setInterval(function(){e()},1)}}}},101:function(t,e){},122:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"confirmPage"},[n("div",{staticClass:"time"},[t.shixiaoShow?t._e():n("div",[n("i"),t._v(" 剩余 "+t._s(t.hours<10?"0"+t.hours:t.hours)+" 时 "+t._s(t.minutes<10?"0"+t.minutes:t.minutes)+" 分 "+t._s(t.seconds<10?"0"+t.seconds:t.seconds)+" 秒 "),n("span",[t._v(" 待支付")])]),t._v(" "),t.shixiaoShow?n("p",[t._v("订单已取消")]):t._e()]),t._v(" "),n("div",{staticClass:"confirmInfo"},[n("div",{staticClass:"infoTitle"},[t._v("\n\t\t\t"+t._s(t.infoObj.cardName)+"\n\t\t")]),t._v(" "),n("p",[n("span",[t._v("年票金额:")]),n("span",[t._v(t._s(t.infoObj.amount)+".00元")])]),t._v(" "),n("p",[n("span",{staticStyle:{"margin-right":"38px"}},[t._v("姓名:")]),n("span",[t._v(t._s(t.infoObj.cnName))])]),t._v(" "),n("p",[n("span",[t._v("身份证号:")]),n("span",[t._v(t._s(t.infoObj.idCard))])]),t._v(" "),n("p",[n("span",[t._v("有效期至:")]),n("span",[t._v(" "+t._s(t.infoObj.validTerm))])])]),t._v(" "),n("div",{staticClass:"confirmDtail"},[n("p",[n("span",[t._v("订单号")]),n("span",[t._v(t._s(t.infoObj.epOrderNo))])]),t._v(" "),n("p",[n("span",[t._v("订单金额")]),n("span",[t._v(t._s(t.infoObj.amount)+".00元")])]),t._v(" "),n("p",[n("span",[t._v("下单时间")]),n("span",[t._v(t._s(t.orderTime))])])]),t._v(" "),t.goPayShow?n("div",{staticClass:"footer"},[n("div",{on:{click:t.clear}},[t._v("取消订单")]),t._v(" "),n("div",{on:{click:t.goPay}},[t._v("去支付")])]):n("div",{staticClass:"deletePay",on:{click:t.deleteOder}},[n("div",[t._v("删除订单")])]),t._v(" "),t.clearShow?n("div",{staticClass:"prop"},[n("div",{staticClass:"propText"},[n("div",[t._v("确认要取消订单？")]),t._v(" "),n("div",{staticClass:"hairline-top",staticStyle:{width:"100%",height:"50px",position:"absolute",bottom:"0"}},[n("span",{staticClass:"hairline-right",on:{click:t.cancel}},[t._v("取消")]),t._v(" "),n("span",{on:{click:t.sure}},[t._v("确定")])])])]):t._e()])},staticRenderFns:[]}}});