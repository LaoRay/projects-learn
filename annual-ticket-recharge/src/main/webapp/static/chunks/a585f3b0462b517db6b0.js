webpackJsonp([7],{2:function(t,e){"use strict";function n(t,e,n){function i(t,n){return sessionStorage.setItem("Authorization",t),$http.defaults.headers.Authorization=t,e&&e(n)}return sessionStorage.getItem("Authorization")?i(sessionStorage.getItem("Authorization")):void $http.post(v+"/v1/open/getSessionId",{code:t}).then(function(t){return i(t.data&&t.data.sessionId,t)}).catch(function(t){return S("当前会话已过期"),n&&n(t)})}function i(t){$http.defaults.headers.Authorization=t}function r(t){return sessionStorage.getItem("Authorization")&&i(sessionStorage.getItem("Authorization")),$http.get(v+"/user/info",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function o(t){return sessionStorage.getItem("Authorization")&&i(sessionStorage.getItem("Authorization")),$http.post(v+"/annualTicket/order/add",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function a(t){return sessionStorage.getItem("Authorization")&&i(sessionStorage.getItem("Authorization")),$http.get(v+"/annualTicket/order/details/"+t+"?"+Math.random()).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function s(t){return sessionStorage.getItem("Authorization")&&i(sessionStorage.getItem("Authorization")),$http.post(v+"/v1/open/pay",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function u(t){return sessionStorage.getItem("Authorization")&&i(sessionStorage.getItem("Authorization")),$http.post(v+"/annualTicket/order/cancel",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function l(t){return sessionStorage.getItem("Authorization")&&i(sessionStorage.getItem("Authorization")),$http.post(v+"/annualTicket/order/delete",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function c(t){return sessionStorage.getItem("Authorization")&&i(sessionStorage.getItem("Authorization")),$http.get(v+"/annualTicket/order/list/"+t+"?"+Math.random()).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function d(t){return sessionStorage.getItem("Authorization")&&i(sessionStorage.getItem("Authorization")),$http.post(v+"/v1/open/queryOrder",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function h(t){return sessionStorage.getItem("Authorization")&&i(sessionStorage.getItem("Authorization")),$http.post(v+"/manager/order/entranceTicket/list",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function g(t){return sessionStorage.getItem("Authorization")&&i(sessionStorage.getItem("Authorization")),$http.get(v+"/manager/order/entranceTicket/details/"+t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function m(t){return sessionStorage.getItem("Authorization")&&i(sessionStorage.getItem("Authorization")),$http.post(v+"/manager/order/annualTicket/list",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function f(t){return sessionStorage.getItem("Authorization")&&i(sessionStorage.getItem("Authorization")),$http.get(v+"/manager/order/annualTicket/details/"+t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}function p(t){return sessionStorage.getItem("Authorization")&&i(sessionStorage.getItem("Authorization")),$http.post(v+"/wx/pay",t).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})}Object.defineProperty(e,"__esModule",{value:!0}),e.getSessionId=n,e.info=r,e.annualTicket=o,e.annualTicketDetail=a,e.annualTicketPay=s,e.annualTicketCancel=u,e.annualTicketDelete=l,e.annualTicketList=c,e.annualTicketStatus=d,e.orderList=h,e.orderDetail=g,e.annualList=m,e.annualDetail=f,e.getLocalIp=p;var v=window.CONFIG.DEV?window.CONFIG.API_DEV:window.CONFIG.API_HOST,S=function(t){alert(t)};$http.defaults.headers.Authorization=sessionStorage.getItem("Authorization");var y={SUCCESS:"0",TIMEOUT:"500",TOKEN_INVALID:"5001",CODE_INVALID:"5002"};$http.interceptors.response.use(function(t){var e=t.meta&&t.meta.code+"";switch(e){case y.SUCCESS:return t;case y.TOKEN_INVALID:case y.CODE_INVALID:return sessionStorage.removeItem("Authorization"),$http.defaults.headers.Authorization=void 0,S(t.meta.message||"当前会话已过期"),setTimeout(function(){window.location.href="toon://mwap/window?params="+JSON.stringify({functionType:1})},2e3),Promise.reject(t);default:return Promise.reject(t)}},function(t){return Promise.reject(t)})},67:function(t,e,n){n(105);var i=n(3)(n(78),n(125),"data-v-b51745f2",null);t.exports=i.exports},78:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(86),o=i(r);e.default=o.default},86:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),r=n(4);e.default={data:function(){var t=this;return{columns:[{title:"序号",type:"index",width:100,render:function(t,e){return t("div",[t("span",{style:{fontFamily:"PingFangSC-Regular",fontSize:"14px",color:" #777E8C",lineHeight:"14px"}})])}},{title:"订单号",key:"epOrderNo",render:function(t,e){return t("div",[t("span",{style:{fontFamily:"PingFangSC-Regular",fontSize:"14px",color:" #777E8C",lineHeight:"14px"}},e.row.epOrderNo)])}},{title:"下单时间",key:"addTime",ellipsis:!0,render:function(t,e){return t("div",[t("span",{style:{fontFamily:"PingFangSC-Regular",fontSize:"14px",color:" #777E8C",lineHeight:"14px"}},e.row.addTime)])}},{title:"账户",key:"mobile",render:function(t,e){return t("div",[t("span",{style:{fontFamily:"PingFangSC-Regular",fontSize:"14px",color:" #777E8C",lineHeight:"14px"}},e.row.mobile)])}},{title:"卡类型",key:"cardType",tooltip:!0,render:function(t,e){return t("div",[t("span",{style:{fontFamily:"PingFangSC-Regular",fontSize:"14px",color:" #777E8C",lineHeight:"14px"}},e.row.cardType)])}},{title:"订单金额",key:"amount",render:function(t,e){return t("div",[t("span",{style:{fontFamily:"PingFangSC-Regular",fontSize:"14px",color:" #777E8C",lineHeight:"14px"}},e.row.amount)])}},{title:"订单状态",key:"flag",width:120,render:function(t,e){return t("div",[t("span",{style:{fontFamily:"PingFangSC-Regular",fontSize:"14px",color:" #777E8C",lineHeight:"14px"}},e.row.flag)])}},{title:"支付时间",key:"payTime",render:function(t,e){return t("div",[t("span",{style:{fontFamily:"PingFangSC-Regular",fontSize:"14px",color:" #777E8C",lineHeight:"14px"}},e.row.payTime)])}},{title:"操作",key:"order",render:function(e,n){return e("div",[e("span",{style:{fontFamily:"PingFangSC-Regular",fontSize:"14px",color:"#3F94FC",lineHeight:"14px"},on:{click:function(){t.$router.push({name:"annualDetail",query:{epOrderNo:n.row.epOrderNo}})}}},"查看详情")])}}],annualList:[],filters:{epOrderNo:"",mobile:"",flag:0,addTimeStart:"",addTimeEnd:""},pages:{current:1,size:20},total:0,startTime:"",endTime:"",isLoading:!0}},methods:{getAnnualList:function(){var t=this;this.isLoading=!0;var e={epOrderNo:this.filters.epOrderNo,mobile:this.filters.mobile,flag:parseInt(this.filters.flag),addTimeStart:new Date(this.filters.addTimeStart).getTime(),addTimeEnd:new Date(this.filters.addTimeEnd).getTime(),current:this.pages.current,size:this.pages.size};(0,i.annualList)(e).then(function(e){if(0===e.meta.code){var n=e.data,i=t.flagMap();t.total=n.total,t.annualList=n.records,n.records.forEach(function(t){null!==t.addTime&&(t.addTime=(0,r.dateFormat)("yyyy-MM-dd hh:mm:ss",t.addTime)),null!==t.payTime&&(t.payTime=(0,r.dateFormat)("yyyy-MM-dd hh:mm:ss",t.payTime)),i.forEach(function(e){Object.keys(e).forEach(function(n){t.flag===parseInt(n)&&(t.flag=e[n])})})})}t.isLoading=!1}).catch(function(e){t.isLoading=!1})},handleQuery:function(){this.getAnnualList()},handelPages:function(t){this.pages.current=t,this.getAnnualList()},handlePageSizeChange:function(t){this.pages.size=t,this.getAnnualList()},flagMap:function(){return[{1:"未支付",2:"已支付",3:"已失效",4:"已取消",9:"异常订单"}]},changeStart:function(t){var e=this;this.startTime=t,this.filters.addTimeStart=new Date(t).getTime(),this.endTime&&this.startTime&&this.endTime<this.startTime&&this.$Modal.warning({content:"起始时间不能大于结束时间",onOk:function(){e.startTime=""}})},changeEnd:function(t){var e=this;this.endTime=t,this.filters.addTimeEnd=new Date(t).getTime(),this.endTime&&this.endTime<this.startTime&&this.$Modal.warning({content:"结束时间不能小于开始时间",onOk:function(){e.endTime=""}})}},mounted:function(){this.getAnnualList()}}},105:function(t,e){},125:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[t._m(0),t._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"content-wrapper"},[n("div",{staticClass:"input-group"},[n("Form",{attrs:{"label-width":70}},[n("Row",[n("Col",{attrs:{span:"6"}},[n("FormItem",{attrs:{label:"订单号"}},[n("Input",{staticStyle:{width:"240px"},attrs:{size:"large"},model:{value:t.filters.epOrderNo,callback:function(e){t.$set(t.filters,"epOrderNo",e)},expression:"filters.epOrderNo"}})],1)],1),t._v(" "),n("Col",{attrs:{span:"6",offset:"6"}},[n("FormItem",{attrs:{label:"账户"}},[n("Input",{staticStyle:{width:"240px"},attrs:{size:"large"},model:{value:t.filters.mobile,callback:function(e){t.$set(t.filters,"mobile",e)},expression:"filters.mobile"}})],1)],1)],1),t._v(" "),n("Row",[n("Col",{attrs:{span:"12"}},[n("FormItem",{attrs:{label:"创建时间"}},[n("DatePicker",{staticStyle:{width:"240px"},attrs:{size:"large",placeholder:"提交开始日期时间",type:"datetime",value:t.startTimes,format:"yyyy/MM/dd HH:mm:ss"},on:{"on-change":t.changeStart}}),t._v(" "),n("DatePicker",{staticStyle:{width:"240px"},attrs:{size:"large",type:"datetime",options:t.options3,placeholder:"提交结束日期时间",value:t.endTime,format:"yyyy/MM/dd HH:mm:ss"},on:{"on-change":t.changeEnd}})],1)],1),t._v(" "),n("Col",{attrs:{span:"6"}},[n("FormItem",{attrs:{label:"订单状态"}},[n("Select",{staticStyle:{width:"240px"},attrs:{size:"large",placeholder:"全部"},model:{value:t.filters.flag,callback:function(e){t.$set(t.filters,"flag",e)},expression:"filters.flag"}},[n("Option",{attrs:{value:""}},[t._v("全部")]),t._v(" "),n("Option",{attrs:{value:"1"}},[t._v("未支付")]),t._v(" "),n("Option",{attrs:{value:"2"}},[t._v("已支付")]),t._v(" "),n("Option",{attrs:{value:"3"}},[t._v("已失效")]),t._v(" "),n("Option",{attrs:{value:"4"}},[t._v("已取消")]),t._v(" "),n("Option",{attrs:{value:"9"}},[t._v("异常订单")])],1)],1)],1),t._v(" "),n("Col",{attrs:{span:"4"}},[n("FormItem",[n("Button",{staticStyle:{width:"90px"},attrs:{size:"large",type:"primary"},on:{click:t.handleQuery}},[t._v("查询")])],1)],1)],1)],1)],1),t._v(" "),n("div",{staticClass:"table-wrapper"},[t.annualList.length>0?n("div",[n("Table",{staticStyle:{width:"100%"},attrs:{columns:t.columns,data:t.annualList,loading:t.isLoading}}),t._v(" "),n("div",{staticClass:"page"},[n("Page",{attrs:{total:t.total,"prev-text":"Previous","next-text":"Next","page-size":"20",current:t.current,"show-elevator":"","show-total":""},on:{"on-change":t.handelPages,"on-page-size-change":t.handlePageSizeChange}})],1)],1):t._e(),t._v(" "),t.annualList.length<=0?n("div",{staticClass:"noData"}):t._e()])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tabButton"},[n("div",{staticClass:"left"},[n("i"),n("span",[t._v("订单查询")])]),t._v(" "),n("div",{staticClass:"right"})])}]}}});