webpackJsonp([1],{2:function(t,e){"use strict";function i(t){$http.defaults.headers.Authorization=t}Object.defineProperty(e,"__esModule",{value:!0});var s=window.CONFIG.DEV?window.CONFIG.API_DEV:window.CONFIG.API_HOST,n=function(t){window.alert(t)};$http.defaults.headers.sessionId=window.sessionStorage.getItem("sessionId");var o={SUCCESS:"0",TIMEOUT:"500",TOKEN_INVALID:"5001",CODE_INVALID:"5002"};$http.interceptors.response.use(function(t){var e=t.meta&&t.meta.code+"";switch(e){case o.SUCCESS:return t;case o.TOKEN_INVALID:case o.CODE_INVALID:return window.sessionStorage.removeItem("sessionId"),$http.defaults.headers.sessionId=void 0,n(t.meta.message||"当前会话已过期"),setTimeout(function(){window.location.href="toon://mwap/window?params="+JSON.stringify({functionType:1})},2e3),Promise.reject(t);default:return Promise.reject(t)}},function(t){return Promise.reject(t)});e.getSessionId=function(t,e,i){function n(t,i){return window.sessionStorage.setItem("Authorization",t),$http.defaults.headers.Authorization=t,e&&e(i)}return window.sessionStorage.getItem("Authorization")?n(window.sessionStorage.getItem("Authorization")):void $http.post(s+"/v1/open/getSessionId?code="+t).then(function(t){if(0===t.meta.code)return n(t.data.tokenType+";"+t.data.accessToken,t)}).catch(function(t){return i&&i(t)})},e.serverTime=function(){return sessionStorage.getItem("Authorization")&&i(sessionStorage.getItem("Authorization")),new Promise(function(t,e){$http.get(s+"/time/range").then(function(e){t(e)}).catch(function(t){e(t)})})},e.userInfo=function(){return sessionStorage.getItem("Authorization")&&i(sessionStorage.getItem("Authorization")),new Promise(function(t,e){$http.get(s+"/user/info").then(function(e){t(e)}).catch(function(t){e(t)})})},e.ticketList=function(t,e){return window.sessionStorage.getItem("Authorization")&&i(window.sessionStorage.getItem("Authorization")),new Promise(function(i,n){$http.get(s+"/ticket/listByProductId?productId="+t,e).then(function(t){i(t)}).catch(function(t){n(t)})})},e.ticketChange=function(t){return window.sessionStorage.getItem("Authorization")&&i(window.sessionStorage.getItem("Authorization")),new Promise(function(e,i){$http.post(s+"/ticket/change",t).then(function(t){e(t)}).catch(function(t){i(t)})})},e.ticketListByOrderNo=function(){return window.sessionStorage.getItem("Authorization")&&i(window.sessionStorage.getItem("Authorization")),new Promise(function(t,e){$http.get(s+"/ticket/listByOrderNo/"+params).then(function(e){t(e)}).catch(function(t){e(t)})})},e.ticketRefund=function(t){return window.sessionStorage.getItem("Authorization")&&i(window.sessionStorage.getItem("Authorization")),new Promise(function(e,i){$http.post(s+"/ticket/refund",{tid:t}).then(function(t){e(t)}).catch(function(t){i(t)})})},e.orderCreate=function(t){return sessionStorage.getItem("Authorization")&&i(window.sessionStorage.getItem("Authorization")),new Promise(function(e,i){$http.post(s+"/order/save",t).then(function(t){e(t)}).catch(function(t){i(t)})})},e.orderDetail=function(t){return window.sessionStorage.getItem("Authorization")&&i(window.sessionStorage.getItem("Authorization")),new Promise(function(e,i){$http.get(s+"/order/details/"+t).then(function(t){e(t)}).catch(function(t){i(t)})})},e.orderCancel=function(t){return window.sessionStorage.getItem("Authorization")&&i(window.sessionStorage.getItem("Authorization")),new Promise(function(e,i){$http.post(s+"/order/cancel",{orderno:t}).then(function(t){e(t)}).catch(function(t){i(t)})})},e.orderPay=function(t){return window.sessionStorage.getItem("Authorization")&&i(window.sessionStorage.getItem("Authorization")),new Promise(function(e,i){$http.post(s+"/order/pay",{orderno:t}).then(function(t){e(t)}).catch(function(t){i(t)})})},e.orderPayCallback=function(t){return window.sessionStorage.getItem("Authorization")&&i(window.sessionStorage.getItem("Authorization")),new Promise(function(e,i){$http.post(s+"/v1/open/queryOrder",t).then(function(t){e(t)}).catch(function(t){i(t)})})},e.orderList=function(t){return window.sessionStorage.getItem("Authorization")&&i(window.sessionStorage.getItem("Authorization")),new Promise(function(e,i){$http.get(s+"/order/list/"+t).then(function(t){e(t)}).catch(function(t){i(t)})})},e.orderDelete=function(t){return window.sessionStorage.getItem("Authorization")&&i(window.sessionStorage.getItem("Authorization")),new Promise(function(e,i){$http.post(s+"/order/delete",{orderno:t}).then(function(t){e(t)}).catch(function(t){i(t)})})},e.listCanRefundOrChange=function(){return window.sessionStorage.getItem("Authorization")&&i(window.sessionStorage.getItem("Authorization")),new Promise(function(t,e){$http.get(s+"/ticket/listCanRefundOrChange").then(function(e){t(e)}).catch(function(t){e(t)})})},e.ticketDetails=function(t){return window.sessionStorage.getItem("Authorization")&&i(window.sessionStorage.getItem("Authorization")),new Promise(function(e,i){$http.get(s+"/ticket/info/"+t).then(function(t){e(t)}).catch(function(t){i(t)})})},e.goPay=function(t){return window.sessionStorage.getItem("Authorization")&&i(window.sessionStorage.getItem("Authorization")),new Promise(function(e,i){$http.post(s+"/v1/open/pay",t).then(function(t){e(t)}).catch(function(t){i(t)})})}},29:function(t,e,i){i(155);var s=i(1)(i(102),i(264),"data-v-2daedd1e",null);t.exports=s.exports},91:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(3);e.default={name:"modelWrap",props:["modelData"],data:function(){return{num:1,maxNum:10,ticketType:!0,defaultDate:"",isMinusDisabled:!1,isPlusDisabled:!1}},mounted:function(){this.modelData.date=this.setDate()},watch:{$route:"setDate"},directives:{numberOnly:{bind:function(t){t.handler=function(){t.value=t.value.replace(/\D+/,"")},t.addEventListener("input",t.handler)},unbind:function(t){t.removeEventListener("input",t.handler)}}},methods:{setDate:function(){return(0,s.sessionData)("setDate")?(0,s.sessionData)("setDate").date:(0,s.dateFormat)("hh",(0,s.sessionData)("serverTime").currentTimeMillis)>=16?(0,s.sessionData)("serverTime").startTime:(0,s.sessionData)("currentTime")},bindMinus:function(t){var t=this.$refs.manual.value;t--,t>=1?(this.isMinusDisabled=!1,this.isPlusDisabled=!1):($util.toast({visible:!0,message:"购买数量最小为1",position:"middle"}),t=0,this.isMinusDisabled=!0,this.isPlusDisabled=!1),this.num=t},bindPlus:function(t){var t=this.$refs.manual.value;t++,t>=200?($util.toast({visible:!0,message:"购买数量最大为200",position:"middle"}),t=200,this.isPlusDisabled=!0,this.isMinusDisabled=!1):(this.isPlusDisabled=!1,this.isMinusDisabled=!1),this.num=t},bindManual:function(t){var e=new RegExp("[`~!@#$^&*()=|{}':;',\\[\\].<>/?~！@#￥……&*（）——|{}【】‘；：”“'。，、？]");return!e.test(this.localDetails.count)&&void(0===this.num?(this.isMinusDisabled=!0,this.isPlusDisabled=!1):this.num>=200?(this.isMinusDisabled=!1,this.isPlusDisabled=!0):(this.isMinusDisabled=!1,this.isPlusDisabled=!1))},ticketEvent:function(t){this.ticketType=!this.ticketType},closeWrapModel:function(t){t.preventDefault(),this.$store.commit("setWrapModel",!1)},browseDateEvent:function(t){this.$router.push({name:"browseDate"})},confirmOrderEvent:function(t){var e=Number(this.$refs.manual.value),i=(0,s.sessionData)("setDate")?(0,s.sessionData)("setDate").date:(0,s.dateFormat)("hh",(0,s.sessionData)("serverTime").currentTimeMillis)>=16?(0,s.sessionData)("serverTime").startTime:(0,s.sessionData)("currentTime");if(Number.isInteger(e)){if(e<=0)return $util.toast({visible:!0,message:"请填写购买数量",position:"middle"}),!1;if(e>200)return $util.toast({visible:!0,message:"购买数量最大为200",position:"middle"}),!1;t.count=this.num,t.remark="",t.mobile=(0,s.sessionData)("userInfo").mobile,t.usetime=i,(0,s.sessionData)("getModelData",t),this.$router.push({name:"orderConfirm",params:{id:t.id}})}else $util.toast({visible:!0,message:"请填写正确的购买数量",position:"middle"})},beforeRouterLeave:function(t,e,i){console.log(t,e),t.path.indexOf("/detail/order/")!==-1&&window.sessionStorage.removeItem("setDate")}}}},102:function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(125),o=s(n);e.default=o.default},125:function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(245),a=s(o);i(3);e.default={data:function(){return{title:"公园景点详情",num:1,detailsData:{},cover:i(207),coverShow:!1,coverNum:17,modelWrapShow:!1,modelData:{title:""}}},components:{ModelWrap:a.default},methods:{init:function(){this.resetData("all"),$util.setTitle("景点详情")},resetData:function(t){switch(t){case"all":}},getTicketdetail:function(){var t=this,e=this.$route.params.id;window.navigator&&window.navigator.onLine?(0,n.ticketList)(e).then(function(i){if(0===i.meta.code){switch(e){case 17:t.cover="/static/images/bg1@3x.png",t.coverShow=!0,t.coverNum=17;break;case 6:t.cover="/static/images/bg2@3x.png",t.coverShow=!0,t.coverNum=6;break;case 15:t.cover="/static/images/bg3@3x.png",t.coverShow=!0,t.coverNum=15;break;case 20:t.cover="/static/images/bg4@3x.png",t.coverShow=!0,t.coverNum=20}t.detailsData=i.data[0]}else $util.toast({visible:!0,message:i.meta.message,position:"middle"})}):$util.toast({visible:!0,message:"网络异常，请检查网络设置",position:"middle"})},purchareEvent:function(){this.$store.commit("setWrapModel",!0)}},beforeRouteEnter:function(t,e,i){i()},beforeRouteLeave:function(t,e,i){"loading"!==t.name&&"ticketDetail"!==t.name&&"payResult"!==t.name||this.$router.push({name:"ticketType",params:{id:this.$route.params.id}}),i()},activated:function(){},mounted:function(){this.init(),this.getTicketdetail();var t=this;new $swiper("#scenicSwiper",{direction:"vertical",slidesPerView:"auto",scrollbarHide:!0,pagination:{el:".scenic-tab",clickable:!0,paginationClickable:!0,observer:!0,renderBullet:function(t,e){var i="";switch(t){case 0:i="购票须知";break;case 1:i="开放时间";break;case 2:i="优惠政策"}return'<button class="'+e+'"><span>'+i+"</span></button>"},on:{slideChangeTransitionEnd:function(){window.sessionStorage.setItem("isActive",this.activeIndex),t.getOrderList(this.activeIndex)}}}})}}},140:function(t,e){},155:function(t,e){},207:function(t,e,i){t.exports=i.p+"static/images/bg1@3x.6cc0ad8.png"},245:function(t,e,i){i(140);var s=i(1)(i(91),i(250),"data-v-0c58b710",null);t.exports=s.exports},250:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"model-wrap"},[i("div",{staticClass:"model-wrap-container"},[i("div",{staticClass:"close-box",on:{click:function(e){t.closeWrapModel(e)}}},[i("i",{staticClass:"icon icon-close"})]),t._v(" "),i("div",{staticClass:"model-wrap-title border-bottom"},[i("h3",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.modelData.ticketName))])]),t._v(" "),i("div",{staticClass:"model-wrap-price border-bottom"},[i("h3",[t._v("票价总计")]),t._v(" "),i("div",{staticClass:"price-text"},[t._v(t._s(t.modelData.buyPrice?(t.modelData.buyPrice*t.num).toFixed(2):0)+" 元")])]),t._v(" "),i("div",{staticClass:"model-wrap-type border-bottom"},[i("h3",[t._v("购票类型")]),t._v(" "),i("div",{staticClass:"ticket-type"},[i("button",{directives:[{name:"show",rawName:"v-show",value:"成人票"===t.modelData.ticketType,expression:"modelData.ticketType === '成人票'"}],staticClass:"active"},[t._v("全价票")]),t._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:"优惠票"===t.modelData.ticketType,expression:"modelData.ticketType === '优惠票'"}],staticClass:"active",staticStyle:{"margin-left":"15px"}},[t._v("半价票")])])]),t._v(" "),i("div",{staticClass:"model-wrap-count border-bottom"},[i("h3",[t._v("购买数量")]),t._v(" "),i("div",{staticClass:"stepper"},[i("span",{staticClass:"icon",class:[t.isMinusDisabled?"dis-minus":"icon-minus"],on:{click:t.bindMinus}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.num,expression:"num",modifiers:{number:!0}}],ref:"manual",attrs:{type:"number",max:"200",min:"1",value:"1",size:"1"},domProps:{value:t.num},on:{input:[function(e){e.target.composing||(t.num=t._n(e.target.value))},t.bindManual],blur:function(e){t.$forceUpdate()}}}),t._v(" "),i("span",{staticClass:"icon",class:[t.isPlusDisabled?"dis-plus":"icon-plus"],on:{click:t.bindPlus}})])]),t._v(" "),i("div",{staticClass:"model-wrap-date border-bottom",on:{click:function(e){t.browseDateEvent(t.modelDate)}}},[i("h3",[t._v("游览日期")]),t._v(" "),i("router-link",{staticStyle:{"padding-right":"16px"},attrs:{to:"/change/date",tag:"div"}},[i("div",{staticStyle:{"margin-right":"10px"},model:{value:t.setDate,callback:function(e){t.setDate=e},expression:"setDate"}},[t._v(t._s(t.setDate()))]),t._v(" "),i("i",{staticClass:"icon icon-jump",staticStyle:{width:"6px",height:"10px",right:"0"}})])],1),t._v(" "),i("div",{staticClass:"model-wrap-btn"},[i("button",{on:{click:function(e){t.confirmOrderEvent(t.modelData)}}},[t._v("确认订单")])])])])},staticRenderFns:[]}},264:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"by-app scenic-spot-detail"},[i("div",{staticClass:"scenic-spot-container"},[i("div",{staticClass:"scenic-spot-title"},[i("div",{staticClass:"scenic-spot-cover"},[i("img",{attrs:{src:t.cover,alt:"封面"}})]),t._v(" "),i("div",{staticClass:"scenic-spot-info border-bottom"},[i("div",{staticClass:"scenic-spot-left"},[i("h3",[t._v(t._s(t.detailsData.ticketName))]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t._v("当前游客: "),i("span",[t._v(t._s(t.detailsData.tourist?t.detailsData.tourist:0))]),t._v("人")])]),t._v(" "),i("div",{staticClass:"scenic-spot-right"},[i("div",[t._v(t._s(t.detailsData.buyPrice?t.detailsData.buyPrice.toFixed(2):0)+" 元")]),t._v(" "),i("div",[t._v(t._s(t.detailsData.price?t.detailsData.price.toFixed(2):0)+" 元")])])]),t._v(" "),i("div",{staticClass:"scenic-spot-text",attrs:{title:t.detailsData.summary}},[t._v("\n        "+t._s(t.detailsData.summary?t.detailsData.summary:t.detailsData.ticketName)+"\n      ")])]),t._v(" "),i("div",{staticClass:"scenic-spot-content"},[i("div",{staticClass:"scenic-tab border-bottom"}),t._v(" "),t._m(0),t._v(" "),i("div",{staticClass:"by-box border-top"},[i("button",{on:{click:t.purchareEvent}},[t._v("确认购买")])])])]),t._v(" "),i("ModelWrap",{directives:[{name:"show",rawName:"v-show",value:this.$store.getters.getWrapModel,expression:"this.$store.getters.getWrapModel"}],ref:"modelWrap",attrs:{modelData:t.detailsData}})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"swiper-container",attrs:{id:"scenicSwiper"}},[i("div",{staticClass:"swiper-wrapper"},[i("div",{staticClass:"swiper-slide"},[i("div",{staticClass:"content",staticStyle:{"min-height":"200px","margin-top":"0px"}},[i("h3",[t._v("购票须知")]),t._v(" "),i("p",[t._v("优惠票入园须出示相关证件(购买优惠票需详细阅读优惠政策,符合条件再购买优惠票);"),i("br"),t._v("支付成功后,换取纸质票（纸质门票即是发票,或持电子票,检票入园;"),i("br"),t._v("单票在游览日期当日一次有效、联票三日内一次有效;游览日期生效前允许变更一次;"),i("br"),t._v("游览日期生效前可以退票,收取5%手续费;"),i("br"),t._v("如需退票,票款将在1-3个工作日原路退回。\n              ")])])]),t._v(" "),i("div",{staticClass:"swiper-slide"},[i("div",{staticClass:"content",staticStyle:{"min-height":"200px"}},[i("h3",[t._v("开放时间")]),t._v(" "),i("p",[t._v("景区的淡旺季时间？"),i("br"),t._v("\n                避暑山庄及周围寺庙景区旺季时间是4月1日-10月31日，淡季时间是：11月1日-翌年3月31日。"),i("br"),t._v("\n                景区对外开放时间是多久？"),i("br"),t._v("\n                4月1日-4月30日：07:30-17:30"),i("br"),t._v("\n                5月1日-10月9日：07:00-18:00"),i("br"),t._v("\n                10月10日-翌年3月31日：08:00-17:30")])])]),t._v(" "),i("div",{staticClass:"swiper-slide"},[i("div",{staticClass:"content",staticStyle:{"min-height":"500px","margin-bottom":"64px"}},[i("h3",[t._v("优惠政策")]),t._v(" "),i("p",[t._v("哪些人可以享受免票政策和门票优惠政策？"),i("br"),t._v("\n                实行门票半价优惠的范围和群体"),i("br"),t._v("\n                1、60周岁至69周岁老年人凭身份证享受半价优惠；70周岁以上老人凭身份证免票；离休老干部凭离休证免票。"),i("br"),t._v("\n                2、现役军人凭军官证或士兵证、离休军人凭军人离休证、残疾军人凭残疾军人证实行免票。"),i("br"),t._v("\n                3、6周岁（含6周岁）以下或身高1.2米（含1.2米）以下的儿童实行免票（儿童进入景区游览必须有监护人同行）；6周岁（不含六周岁）--18周岁（含18周岁）未成年人、全日制大学本科及以下学历在校学生凭学生证实行半价优惠。（青少年购票入园时须出示居民身份证或学生证等有效证件)。"),i("br"),t._v("\n                4、残疾人凭残疾证(中残联发放)实行免票。"),i("br"),t._v("\n                5、媒体记者进行旅游采访凭国家新闻总署或国家广播电视总局签发的记者证、旅游业务考察的旅行社经理（须经承德市旅游局确认）凭经理资格证、带团导游凭国家旅游局颁发的导游证及旅游团队任务单实行免票。"),i("br"),t._v("\n                6、承德市市级以上劳动模范、优秀专家、拔尖人才凭国务院、省、市人民政府颁发的有效证件、旅游执法和价格执法人员（须两人以上并持有执法通知书）凭执法证实行免票。")])])])])])}]}}});