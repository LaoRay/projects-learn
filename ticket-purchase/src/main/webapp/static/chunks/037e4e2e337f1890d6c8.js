webpackJsonp([10],{2:function(t,e){"use strict";function i(t){$http.defaults.headers.Authorization=t}Object.defineProperty(e,"__esModule",{value:!0});var n=window.CONFIG.DEV?window.CONFIG.API_DEV:window.CONFIG.API_HOST,o=function(t){window.alert(t)};$http.defaults.headers.sessionId=window.sessionStorage.getItem("sessionId");var s={SUCCESS:"0",TIMEOUT:"500",TOKEN_INVALID:"5001",CODE_INVALID:"5002"};$http.interceptors.response.use(function(t){var e=t.meta&&t.meta.code+"";switch(e){case s.SUCCESS:return t;case s.TOKEN_INVALID:case s.CODE_INVALID:return window.sessionStorage.removeItem("sessionId"),$http.defaults.headers.sessionId=void 0,o(t.meta.message||"当前会话已过期"),setTimeout(function(){window.location.href="toon://mwap/window?params="+JSON.stringify({functionType:1})},2e3),Promise.reject(t);default:return Promise.reject(t)}},function(t){return Promise.reject(t)});e.getSessionId=function(t,e,i){function o(t,i){return window.sessionStorage.setItem("Authorization",t),$http.defaults.headers.Authorization=t,e&&e(i)}return window.sessionStorage.getItem("Authorization")?o(window.sessionStorage.getItem("Authorization")):void $http.post(n+"/v1/open/getSessionId?code="+t).then(function(t){if(0===t.meta.code)return o(t.data.tokenType+";"+t.data.accessToken,t)}).catch(function(t){return i&&i(t)})},e.serverTime=function(){return sessionStorage.getItem("Authorization")&&i(sessionStorage.getItem("Authorization")),new Promise(function(t,e){$http.get(n+"/time/range").then(function(e){t(e)}).catch(function(t){e(t)})})},e.userInfo=function(){return sessionStorage.getItem("Authorization")&&i(sessionStorage.getItem("Authorization")),new Promise(function(t,e){$http.get(n+"/user/info").then(function(e){t(e)}).catch(function(t){e(t)})})},e.ticketList=function(t,e){return window.sessionStorage.getItem("Authorization")&&i(window.sessionStorage.getItem("Authorization")),new Promise(function(i,o){$http.get(n+"/ticket/listByProductId?productId="+t,e).then(function(t){i(t)}).catch(function(t){o(t)})})},e.ticketChange=function(t){return window.sessionStorage.getItem("Authorization")&&i(window.sessionStorage.getItem("Authorization")),new Promise(function(e,i){$http.post(n+"/ticket/change",t).then(function(t){e(t)}).catch(function(t){i(t)})})},e.ticketListByOrderNo=function(){return window.sessionStorage.getItem("Authorization")&&i(window.sessionStorage.getItem("Authorization")),new Promise(function(t,e){$http.get(n+"/ticket/listByOrderNo/"+params).then(function(e){t(e)}).catch(function(t){e(t)})})},e.ticketRefund=function(t){return window.sessionStorage.getItem("Authorization")&&i(window.sessionStorage.getItem("Authorization")),new Promise(function(e,i){$http.post(n+"/ticket/refund",{tid:t}).then(function(t){e(t)}).catch(function(t){i(t)})})},e.orderCreate=function(t){return sessionStorage.getItem("Authorization")&&i(window.sessionStorage.getItem("Authorization")),new Promise(function(e,i){$http.post(n+"/order/save",t).then(function(t){e(t)}).catch(function(t){i(t)})})},e.orderDetail=function(t){return window.sessionStorage.getItem("Authorization")&&i(window.sessionStorage.getItem("Authorization")),new Promise(function(e,i){$http.get(n+"/order/details/"+t).then(function(t){e(t)}).catch(function(t){i(t)})})},e.orderCancel=function(t){return window.sessionStorage.getItem("Authorization")&&i(window.sessionStorage.getItem("Authorization")),new Promise(function(e,i){$http.post(n+"/order/cancel",{orderno:t}).then(function(t){e(t)}).catch(function(t){i(t)})})},e.orderPay=function(t){return window.sessionStorage.getItem("Authorization")&&i(window.sessionStorage.getItem("Authorization")),new Promise(function(e,i){$http.post(n+"/order/pay",{orderno:t}).then(function(t){e(t)}).catch(function(t){i(t)})})},e.orderPayCallback=function(t){return window.sessionStorage.getItem("Authorization")&&i(window.sessionStorage.getItem("Authorization")),new Promise(function(e,i){$http.post(n+"/v1/open/queryOrder",t).then(function(t){e(t)}).catch(function(t){i(t)})})},e.orderList=function(t){return window.sessionStorage.getItem("Authorization")&&i(window.sessionStorage.getItem("Authorization")),new Promise(function(e,i){$http.get(n+"/order/list/"+t).then(function(t){e(t)}).catch(function(t){i(t)})})},e.orderDelete=function(t){return window.sessionStorage.getItem("Authorization")&&i(window.sessionStorage.getItem("Authorization")),new Promise(function(e,i){$http.post(n+"/order/delete",{orderno:t}).then(function(t){e(t)}).catch(function(t){i(t)})})},e.listCanRefundOrChange=function(){return window.sessionStorage.getItem("Authorization")&&i(window.sessionStorage.getItem("Authorization")),new Promise(function(t,e){$http.get(n+"/ticket/listCanRefundOrChange").then(function(e){t(e)}).catch(function(t){e(t)})})},e.ticketDetails=function(t){return window.sessionStorage.getItem("Authorization")&&i(window.sessionStorage.getItem("Authorization")),new Promise(function(e,i){$http.get(n+"/ticket/info/"+t).then(function(t){e(t)}).catch(function(t){i(t)})})},e.goPay=function(t){return window.sessionStorage.getItem("Authorization")&&i(window.sessionStorage.getItem("Authorization")),new Promise(function(e,i){$http.post(n+"/v1/open/pay",t).then(function(t){e(t)}).catch(function(t){i(t)})})}},25:function(t,e,i){i(184);var n=i(1)(i(98),i(292),"data-v-a7365944",null);t.exports=n.exports},98:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(120),s=n(o);e.default=s.default},120:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},o=i(6),s=i(2),a=i(3);e.default={name:"orderDetail",data:function(){return{title:"订单详情",orderInfo:{orderNo:""},ticketInfo:{tid:""}}},computed:n({},(0,o.mapGetters)([""])),methods:{init:function(){this.resetData("all"),$util.setTitle("订单详情")},resetData:function(t){switch(t){case"all":}},getOrderdetail:function(){var t=this,e=this.$route.params.id;window.navigator&&window.navigator.onLine?(0,s.orderDetail)(e).then(function(e){if(0===e.meta.code)switch(t.orderInfo=e.data.orderInfo,console.log(t.orderInfo),t.orderInfo.addTime=(0,a.dateFormat)("yyyy-MM-dd",e.data.orderInfo.addTime),t.ticketInfo=e.data.ticketList[0],e.data.orderInfo.flag){case 1:t.isNopay=!0;break;case 2:t.isPay=!0;break;case 3:t.isFailed=!0;break;case 4:t.isCancel=!0;break;case 8:t.isLoading=!0;break;case 9:t.isPayFailed=!0}}).catch(function(t){$util.toast({visible:!0,message:t.meta.message,position:"middle"})}):$util.toast({visible:!0,message:"网络异常，请检查网络设置",position:"middle"})}},beforeRouteEnter:function(t,e,i){i()},activated:function(){this.init()},mounted:function(){this.getOrderdetail()}}},184:function(t,e){},292:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"order-show"},[i("div",{staticClass:"show-container"},[i("div",{staticClass:"show-status"},[t.isNopay?i("div",{key:"orderInfo.flag",staticClass:"ticket-box"},[i("div",{staticClass:"icon icon-nopay"}),t._v(" "),i("div",{staticClass:"detail-nopay"},[i("h3",[t._v("订单未支付")]),t._v(" "),i("div",{staticClass:"clock"},[t._v("\n            剩余 "+t._s(t.hours<10?"0"+t.hours:t.hours)+" 时 "+t._s(t.minutes<10?"0"+t.minutes:t.minutes)+" 分 "+t._s(t.seconds<10?"0"+t.seconds:t.seconds)+" 秒\n          ")])])]):t.isPay?i("div",{key:"orderInfo.flag",staticClass:"ticket-box",staticStyle:{position:"relative"}},[i("div",{staticClass:"icon icon-pay",style:{backgroundImage:"url("+t.ticketInfo.qr+")",backgroundSize:"auto",backgroundPosition:"-20px -596px"}}),t._v(" "),4===t.ticketInfo.flag?i("div",{staticStyle:{position:"absolute",width:"100%",height:"inherit",top:"0"}},[i("span",{staticClass:"icon icon-succ"})]):t._e(),t._v(" "),t._m(0)]):t.isFailed?i("div",{key:"orderInfo.flag",staticClass:"ticket-box"},[i("div",{staticClass:"icon icon-failed",style:{opacity:.16,backgroundImage:"url("+t.ticketInfo.qr+")",backgroundSize:"auto",backgroundPosition:"-20px -596px"}}),t._v(" "),t._m(1)]):t.isCancel?i("div",{key:"orderInfo.flag",staticClass:"ticket-box"},[i("div",{staticClass:"icon icon-failed"}),t._v(" "),t._m(2)]):t.isLoading?i("div",{key:"orderInfo.flag",staticClass:"ticket-box"},[t._m(3)]):t.isPayFailed?i("div",{key:"orderInfo.flag",staticClass:"ticket-box"},[i("div",{staticClass:"icon icon-failed"}),t._v(" "),t._m(4)]):t._e()]),t._v(" "),i("div",{staticClass:"order-info"},[i("div",{staticClass:"order-item"},[t._v("\n        订单号"),i("span",[t._v(t._s(t.orderInfo.epOrderNo))])]),t._v(" "),i("div",{staticClass:"order-item"},[t._v("\n        订单金额"),i("span",[t._v(t._s(t.orderInfo.amount?t.orderInfo.amount.toFixed(2):0)+" 元")])]),t._v(" "),i("div",{staticClass:"order-item"},[t._v("\n        下单时间"),i("span",[t._v(t._s(t.orderInfo.addTime))])])]),t._v(" "),i("div",{staticClass:"ticket-info"},[i("h3",[t._v(t._s(t.ticketInfo.ticketName))]),t._v(" "),i("div",{staticClass:"ticket-item"},[t._v("\n        类型 "),i("span",[t._v(t._s(2===t.ticketInfo.ticketType?"半价票":"全价票"))])]),t._v(" "),i("div",{staticClass:"ticket-item"},[t._v("\n        人数 "),i("span",[t._v(t._s(t.ticketInfo.manNum)+" 人")])]),t._v(" "),i("div",{staticClass:"ticket-item"},[t._v("\n        票价 "),i("span",[t._v(t._s(t.ticketInfo.tprice?t.ticketInfo.tprice.toFixed(2):0)+" 元")])]),t._v(" "),i("div",{staticClass:"ticket-item"},[t._v("\n        总金额 "),i("span",[t._v(t._s(t.ticketInfo.tprice?(t.ticketInfo.tprice*t.ticketInfo.manNum).toFixed(2):0)+" 元")])]),t._v(" "),i("div",{staticClass:"ticket-item"},[t._v("\n        票号 "),i("span",[t._v(t._s(t.ticketInfo.tid))])]),t._v(" "),i("div",{staticClass:"ticket-item"},[t._v("\n        浏览日期 "),i("span",[t._v(t._s(t.ticketInfo.useTime))])])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"detail-pay"},[i("h3",[t._v("兑票时请出示此二维码")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"detail-pay"},[i("h3",[t._v("订单已失效")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"detail-pay"},[i("h3",[t._v("订单已取消")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pay-icon"},[i("div",{staticClass:"icon icon-loading"}),t._v(" "),i("h3",[t._v("订单处理中")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"detail-pay"},[i("h3",[t._v("订单异常")])])}]}}});